<?php//included filesinclude_once('local_classes/Validation.php');include_once('local_classes/Contacts.php');include_once('local_classes/LocalPages.php');//initiate classes$Validation = new Validation();$PageData = new LocalPages();$Contacts = new Contacts("file/contacts.xml");function validate(){	global $Validation;	global $errorArray;	//check to make sure the entries are not blank	$errorArray[0] = $Validation->checkForBlanks($_POST['fname']);	$errorArray[1] = $Validation->checkForBlanks($_POST['lname']);	$errorArray[2] = $Validation->checkForBlanks($_POST['phone']);	$errorArray[3] = $Validation->checkForBlanks($_POST['email']);}//button defaults to Add New Contact, but also is Update Contact when appropriate.$button = '<input type="submit" name="submit" value="Add New Contact" />';//if the button named submit was press do the following.if (isset($_POST['submit'])){	//call validate function	validate();	//if no errors add contact.	if(!$Validation->checkErrors())	{		//since $_POST is an acciative array we can use post.		$Contacts->addContact($_POST);		clearPost();				}}//if the remove link was clicked dor the following.else if (isset($_GET['r'])){	//remove contacts based upon the value passed in the URL	$Contacts->removeContact($_GET['r']);}//if the edit link was clicked do the followingelse if (isset($_GET['e'])){	//the get statement passes the node attribute id, editContact gets	//the node element values and returns an associative array that is 	//put into $_POST. This is done because $_POST is used to show the 	//values in the form fields.	$_POST = $Contacts->editContact($_GET['e']);	//update contact button is used	$button = '<input type="submit" name="update" value="Update Contact" />';}//if update button was clickedelse if (isset($_POST['update'])){	//validate	validate();	//if no errors do the following	if (!$Validation->checkErrors())	{		$Contacts->updateContact($_POST);		clearPost();	}	else{		//If there was a validation error make sure to show update button.		$button = '<input type="submit" name="update" value="Update Contact" />';	}}function clearPost(){	$dataArr = array('fname','lname','phone','email','info','uidHidden');		//loop through $dataArr and clear form fields		foreach($dataArr as $v){			$_POST[$v] = "";		}	}//build pageecho $PageData->doctype();echo $PageData->metaData();echo $PageData->title('WEB250 XML');?><link href="css/main.css" rel="stylesheet" type="text/css" />    </head>    <body>        <div id="wrapper">            <div id="header"><?php echo $PageData->headerText(); ?></div>            <div id="content">	            <!--$_POST and error messages are embedded into HTML-->	            <form action="index.php" method="post">		            <label for="fname">First Name:</label><span class="error"><?php if(isset($errorArray[0])){echo $errorArray[0];} ?></span><br />		            <input type="text" id="fname" name="fname" value="<?php if(isset($_POST['fname'])){echo $_POST['fname'];} ?>"/><br />		            <label for="lname">Last Name:</label><span class="error"><?php if(isset($errorArray[1])){echo $errorArray[1];} ?></span><br />		            <input type="text" id="lname" name="lname" value="<?php if(isset($_POST['lname'])){echo $_POST['lname'];} ?>" /><br />		            <label for="phone">Phone Number:</label><span class="error"><?php if(isset($errorArray[2])){echo $errorArray[2];} ?></span><br />		            <input type="text" id="phone" name="phone" value="<?php if(isset($_POST['phone'])){echo $_POST['phone'];} ?>" /><br />		            <label for="email">Email:</label><span class="error"><?php if(isset($errorArray[3])){echo $errorArray[3];} ?></span><br />		            <input type="text" id="email" name="email" value="<?php if(isset($_POST['email'])){echo $_POST['email'];} ?>" /><br />		            <label for="info">Additional Info:</label><span class="error"><?php if(isset($errorArray[4])){echo $errorArray[4];} ?></span><br />		            <textarea id="info" name="info" cols="20" rows="5"><?php if(isset($_POST['info'])){echo $_POST['info'];} ?></textarea><br />		            <input type="hidden" name="uidHidden" value="<?php if(isset($_POST['uidHidden'])){echo $_POST['uidHidden'];} ?>" />					<?php echo $button ?>		        </form>	            <div id="contacts">	                <h1>Contacts</h1>	                <!--display contacts-->	             <?php echo $Contacts->displayContacts(); ?>	            </div>            </div>            <?php echo $PageData->Footer(); ?>        </div>            </body></html>